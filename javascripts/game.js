Crafty.init(800, 400, document.getElementById('game'));
Crafty.background('rgb(30,120,150)');


//Init Variables
var viewWidth = Crafty.viewport.width;
var viewHeight = Crafty.viewport.height;
var aiSpeed = 2;
var reward = 0;
//Paddles
var ai = Crafty.e('AIPaddle, 2D, Canvas, Color, Twoway')
  .attr({ x: 20, y: 300, w: 10, h: 100, powerup: "", name: "enemy" })
  .color('rgb(205, 200, 177)')
  .bind('EnterFrame', function () {
    if (this.y + (this.h / 2) < ball.y) {
      this.y += aiSpeed;
    } else {
      this.y -= aiSpeed;
    }

    if (this.y < 0) {
      this.y = 0;
    }
    if (this.y > viewHeight - this.h) {
      this.y = viewHeight - this.h;
    }
    if (this.powerup != "") {
      if (this.powerup == "enhancement_pill") {
        ai.h = 130;
        removePowerUpFrom(ai, "AIPowerUp");
        Crafty.e("Delay").delay(function () {
          ai.h = 100;
        }, 5000, 0);
      }
      else if (this.powerup == "ice_shower") {
        removePowerUpFrom(ai, "AIPowerUp");
        Crafty.e('2D, DOM, Image, Collision')
          .image("./icons/ice.png")
          .attr({
            x: 30, y: ai.y + (ai.h / 2), w: 20, h: 20,
            dX: +4, dY: 0
          })
          .onHit('PlayerPaddle', function () {
            player.h -= 20;
            Crafty.e("Delay").delay(function () {
              player.h += 20;
            }, 5000, 0);
            this.destroy();
          })
          .bind('EnterFrame', function () {
            this.x += this.dX;
            if (this.x < -20) {
              this.destroy();
            }
          })
      }
    }
  });

var player = Crafty.e('PlayerPaddle, 2D, Canvas, Color, Fourway')
  .attr({ x: (viewWidth - 30), y: 300, w: 10, h: 100, powerup: "", hitWall: 0, name: "player" })
  .color('rgb(205, 155, 155)')
  .fourway(4)
  .bind('EnterFrame', function () {
    this.x = viewWidth - 30;
    this.hitWall = 0;
    if (this.y < 0) {
      this.y = 0;
      this.hitWall = 1;
    }
    if (this.y > viewHeight - this.h) {
      this.y = viewHeight - this.h;
      this.hitWall = 1;
    }
  }).bind('KeyDown', function (e) {
    if (e.key == Crafty.keys.SPACE) {

      // Code to activate Power up
      if (this.powerup != "") {
        if (this.powerup == "enhancement_pill") {
          player.h = 130;
          removePowerUpFrom(player, "PlayerPowerUp");
          Crafty.e("Delay").delay(function () {
            player.h = 100;
          }, 5000, 0);
        }
        else if (this.powerup == "ice_shower") {
          removePowerUpFrom(player, "PlayerPowerUp");
          Crafty.e('2D, DOM, Image, Collision')
            .image("./icons/ice.png")
            .attr({
              x: (viewWidth - 30), y: player.y + (player.h / 2), w: 20, h: 20,
              dX: -4, dY: 0
            })
            .onHit('AIPaddle', function () {
              ai.h -= 20;
              Crafty.e("Delay").delay(function () {
                ai.h += 20;
              }, 5000, 0);
              this.destroy();
            })
            .bind('EnterFrame', function () {
              this.x += this.dX;
              if (this.x < -20) {
                this.destroy();
              }
            })
        }
      }
    }
  });;






// create an environment object
var env = {};
/*// List of states
-ball.x
-ball.y
-mypaddle.y
-enemy.y
-hitwall?
*/
env.getNumStates = function () { return 5; }
env.getMaxNumActions = function () { return 2; }

var actions = [1, 2];



// create the DQN agent
var spec = { alpha: 0.01 } // see full options on DQN page
agent = new RL.DQNAgent(env, spec);

document.getElementById("saveData").addEventListener("click", function () {
  localStorage.agentBrain =  JSON.stringify(agent.toJSON());
  try{
    var temp = JSON.parse(localStorage.agentBrain);
    console.log("Data saved sucessfully.... Most likely...");
  }catch(e){
    console.log("ERROR while saving data!! Try again in a while!");
  }
});

document.getElementById("loadData").addEventListener("click", function () {
  console.log("Load Data");
  var agentBrain = JSON.parse(localStorage.agentBrain);
  console.log(agentBrain);
  agent.fromJSON(agentBrain);
});



Crafty.e("Delay").delay(function () {
  localStorage.agentBrain =  JSON.stringify(agent.toJSON());
console.log("Saved Brain through CRON");
}, 1200000, -1);



//Ball
var ball = Crafty.e('2D, DOM, Image, Collision')
  .image("./icons/ball.png")
  .attr({
    x: viewWidth / 2, y: viewHeight / 2, w: 10, h: 10,
    dX: Crafty.math.randomInt(2, 5),
    dY: Crafty.math.randomInt(2, 5),
    name: "ball"
  })
  .bind('EnterFrame', function () {

    //hit floor or roof
    if (this.y <= 0 || this.y >= viewHeight - this.h){
      this.dY *= -1;
    }
    if (this.x > viewWidth - this.w) {
      this.x = viewWidth / 2;
      this.y = (viewHeight / 2) - (this.h / 2);
      this.dY =  Crafty.math.randomInt(-3, 3);
	if(this.dY == 0){
	this.dY = 1;}
      this.dX = Crafty.math.randomInt(2, 3);
      Crafty('AIPoints').each(function () {
        this.text(++this.points + ' Points')
      });
    }
    if (this.x < this.w) {
      this.x = viewWidth / 2;
      this.y = (viewHeight / 2) - (this.h / 2);
      this.dX = Crafty.math.randomInt(-2, -3);
      this.dY =  Crafty.math.randomInt(-3, 3);
	if(this.dY == 0){
	this.dY = 1;}      
Crafty('PlayerPoints').each(function () {
        this.text(++this.points + ' Points')
      });
      //aiSpeed += 0.3;
      Crafty('AISpeed').each(function () {
        this.text("AI Speed: " + aiSpeed)
      });
    }


    this.x += this.dX;
    this.y += this.dY;





    var action = agent.act(getState());
    var actionString = "";
    if (action == 0) {
      ++player.y;
	actionString = "Down";
    }
    if (action == 1) {
      --player.y;
	actionString = "Up";
    }

    reward = 0;
    //Reward calculation
    var objectsHit = this.hit("PlayerPaddle");
    if (objectsHit != false) {
      reward += 1.0;
    }

    if (this.x < this.w) {
      reward += 100.0;
    }

    if (this.x > viewWidth - this.w) {
      reward -= 100.0;
    }

	Crafty('PlayerPowerUp').each(function () {
    this.text("Reward: " + reward);
  });

	Crafty('FPSCounter').each(function () {
    this.text("Agent Action: " + actionString);
  });



    agent.learn(reward);
	



  })
  .onHit('PlayerPaddle', function () {
    this.dX *= -1;
    createPowerUpFor(ai, 'AIPaddle');
  })
  .onHit('AIPaddle', function () {
    //aiSpeed -= 0.1;
    Crafty('AISpeed').each(function () {
      this.text("AI Speed: " + aiSpeed)
    });
    this.dX *= -1;
    createPowerUpFor(player, 'PlayerPaddle');
  })






/*
setInterval(function(){ // start the learning loop
  var action = agent.act(s); // s is an array of length 8
  //... execute action in environment and get the reward
  agent.learn(reward); // the agent improves its Q,policy,model, etc. reward is a float
}, 0);
*/
function getState() {
  var state = [];
  state.push(ball.x);
  state.push(ball.y);
  state.push(player.y);
  state.push(ai.y);
  state.push(player.hitWall);
  return state;
}




















//Score boards
Crafty.e('AIPoints, DOM, 2D, Text')
  .attr({ x: 20, y: 20, w: 100, h: 20, points: 0 })
  .textColor('#FFFFFF', 0.8)
  .text('0 Points');
Crafty.e('PlayerPoints, DOM, 2D, Text')
  .attr({ x: 715, y: 20, w: 100, h: 20, points: 0 })
  .textColor('#FFFFFF', 0.8)
  .text('0 Points');


// PowerUp board
Crafty.e('AIPowerUp, DOM, 2D, Text')
  .attr({ x: 20, y: 40, w: 100, h: 20 })
  .textColor('#FFFFFF', 0.8)
  .text('Power Up : None');
Crafty.e('PlayerPowerUp, DOM, 2D, Text')
  .attr({ x: 700, y: 40, w: 100, h: 20 })
  .textColor('#FFFFFF', 0.8)
  .text('Power Up : None');


// AI Speed board
Crafty.e('AISpeed, DOM, 2D, Text')
  .attr({ x: 20, y: 60, w: 200, h: 20 })
  .textColor('#FFFFFF', 0.8)
  .text('AI Speed: ' + aiSpeed);



// FPS Counter
Crafty.e('FPSCounter, DOM, 2D, Text')
  .attr({ x: 700, y: 60, w: 100, h: 20 })
  .textColor('#FFFFFF', 0.8)
  .text('FPS: 0');


function createPowerUpFor(item, paddleName) {
  var yourFate = Crafty.math.randomInt(0, 100);
  if (yourFate > 190) {
    // Create a power Usp
    var whichPowerUp = Crafty.math.randomInt(1, 2);
    if (whichPowerUp == 1) {
      var enhancementPill = Crafty.e('2D, DOM, Image, Collision')
        .image("./icons/expand.png")
        .attr({
          x: item.x, y: Crafty.math.randomInt(0, (viewHeight - 10)), w: 20, h: 20,
        })
        .onHit(paddleName, function () {
          givePowerUpTo(paddleName, "enhancement_pill");
          enhancementPill.destroy();
        })
      Crafty.e("Delay").delay(function () {
        enhancementPill.destroy();
      }, 3000, 0);
    }
    else if (whichPowerUp == 2) {
      var coldShower = Crafty.e('2D, DOM, Image, Collision')
        .image("./icons/ice.png")
        .attr({
          x: item.x, y: Crafty.math.randomInt(0, (viewHeight - 10)), w: 20, h: 20,
        })
        .onHit(paddleName, function () {
          givePowerUpTo(paddleName, "ice_shower");
          coldShower.destroy();
        });
      Crafty.e("Delay").delay(function () {
        coldShower.destroy();
      }, 3000, 0);
    }
  }
}



function givePowerUpTo(name, powerUp) {
  var paddle;
  var powerUpBoard = "";
  if (name == "PlayerPaddle") {
    paddle = player;
    powerUpBoard = "PlayerPowerUp";
  } else {
    paddle = ai;
    powerUpBoard = "AIPowerUp";
  }
  paddle.powerup = powerUp;
  Crafty(powerUpBoard).each(function () {
    this.text("Power Up: " + powerUp);
  })
}


function removePowerUpFrom(item, powerUpBoard) {
  item.powerup = "";
  Crafty(powerUpBoard).each(function () {
    this.text('Power Up: None');
  });
}



// Saving Brain after ~10 hours of trianing
var savedBrain = {
  "nh": 100,
  "ns": 5,
  "na": 2,
  "net": {
    "W1": {
      "n": 100,
      "d": 5,
      "w": {
        "0": 0.10903302769740751,
        "1": 0.007100196058416961,
        "2": 0.03894862017369999,
        "3": 0.03389533987024283,
        "4": 0.006531452862443902,
        "5": -0.05179828480317284,
        "6": -0.3834796949225612,
        "7": -0.12505852857857525,
        "8": -0.2896424212713328,
        "9": -0.0013954310552724651,
        "10": -0.059797852820296364,
        "11": -0.21843051346301293,
        "12": -0.05449654488182215,
        "13": -0.16146856102570206,
        "14": 0.0032010379982237488,
        "15": 0.0685802353809644,
        "16": 0.4403795034768721,
        "17": 2.7751077515923406,
        "18": 0.8449277960096334,
        "19": -0.013324865557249,
        "20": 0.21227064007516994,
        "21": 0.13628946663043623,
        "22": -0.01482819491473318,
        "23": 0.12950492450068676,
        "24": 0.013645374473587562,
        "25": -0.14032748224162692,
        "26": -0.02073223359192933,
        "27": -0.041774606899669844,
        "28": -0.032510667004610534,
        "29": 0.005624340989643741,
        "30": -0.25488862062571127,
        "31": -0.1059642361301104,
        "32": -0.17194997008395846,
        "33": -0.08832339898611481,
        "34": 0.01950510391389522,
        "35": -0.023304260562216596,
        "36": -0.09447668244961835,
        "37": -0.23714206542314456,
        "38": -0.1883666901014678,
        "39": 0.006265303640308923,
        "40": 0.05227674130471166,
        "41": 0.11978845022697002,
        "42": 0.01116648248560092,
        "43": 0.11762428000923764,
        "44": 0.00032238586219562654,
        "45": -0.14181948192491362,
        "46": -0.06458885780111513,
        "47": -0.11858003221315844,
        "48": -0.04662560017985749,
        "49": 0.013085508148900771,
        "50": -0.07739398725122812,
        "51": -0.048002665908761045,
        "52": -0.009191103115387378,
        "53": -0.04845651508521546,
        "54": 0.0004660719669264151,
        "55": -0.32733522276766613,
        "56": 0.000378388926056462,
        "57": -0.11638005932515572,
        "58": -0.024311110467150888,
        "59": -0.014236674553408683,
        "60": -0.05157491025442331,
        "61": -0.05694214205032447,
        "62": -0.07116642442221022,
        "63": 0.0425080477562199,
        "64": 0.010626893665133398,
        "65": 0.7578828885522152,
        "66": 0.49018139917604076,
        "67": 0.31630766797485727,
        "68": -0.02927542997678135,
        "69": -0.009807393094631387,
        "70": -0.06166040800844052,
        "71": -0.17124650913662118,
        "72": -0.02104328833349814,
        "73": -0.0988687201342858,
        "74": -0.01350030716718893,
        "75": -0.07422903085034457,
        "76": -0.22441878777216467,
        "77": -0.06524373524996231,
        "78": 0.1888974837712915,
        "79": 0.007400840968009141,
        "80": -0.0822241931913118,
        "81": -0.07522298392861716,
        "82": -0.045570221985189195,
        "83": -0.07105658169500827,
        "84": -0.01013768809229929,
        "85": 0.13032216052006224,
        "86": 0.03471381488934872,
        "87": 0.019143523856092724,
        "88": 0.022151580732054213,
        "89": 0.010466329942093556,
        "90": -0.04415602894593899,
        "91": -0.059213475729683836,
        "92": -0.2447470163556245,
        "93": -0.08149857633474597,
        "94": 0.0011067544397027381,
        "95": 0.14644697837250398,
        "96": 0.03469376887920259,
        "97": 0.02842849065215607,
        "98": 0.010557149730552837,
        "99": -0.0012962144182642463,
        "100": -0.05990396687907913,
        "101": -0.05994559891337923,
        "102": -0.05105598006899066,
        "103": -0.05284679767329642,
        "104": -0.007005759582990667,
        "105": -0.23616639179540933,
        "106": -0.05376724090124331,
        "107": 0.00007445727753322692,
        "108": -0.06339495764718091,
        "109": 0.007075574824903172,
        "110": -0.2475758367896355,
        "111": -0.3770253552316567,
        "112": -0.33327950002905504,
        "113": 0.057862002693604336,
        "114": -0.0051197620200462614,
        "115": 0.03905801077913919,
        "116": 0.250408112747906,
        "117": 0.10947534766056942,
        "118": 0.21765967235996014,
        "119": 0.0016998161267934254,
        "120": -0.13318585444245254,
        "121": -0.02536201328858506,
        "122": -0.039006728010316516,
        "123": -0.001448612992409973,
        "124": -0.016162718036846685,
        "125": -0.49813145202130243,
        "126": 2.913548605606438,
        "127": -2.7594970412964535,
        "128": 0.5903151153185074,
        "129": 0.0005615332384895675,
        "130": -0.04753674125445146,
        "131": -0.11771834233964225,
        "132": -0.32125051086445433,
        "133": -0.0878018011377718,
        "134": -0.006276455132442886,
        "135": -0.15115849492659836,
        "136": 0.0016748211497247206,
        "137": -0.007028256779180847,
        "138": -0.02731501803799687,
        "139": 0.011199835041074703,
        "140": 0.08986737446340846,
        "141": 0.6413791450352248,
        "142": 0.45180901263056605,
        "143": 0.5459156096639761,
        "144": -0.01592977558510385,
        "145": -0.05290952012763384,
        "146": 0.008107927967470814,
        "147": -0.23694129697272226,
        "148": -0.16418482824577865,
        "149": 0.015178457027818223,
        "150": 0.10916345950102121,
        "151": 0.1516694256008001,
        "152": 0.011124958033630705,
        "153": 0.08612466857242344,
        "154": -0.0066783696163816245,
        "155": -0.20534669451452187,
        "156": 0.0063738323987464676,
        "157": -0.22282287000440365,
        "158": -0.024759673131581415,
        "159": -0.01603578536568622,
        "160": 0.04867395529737621,
        "161": 0.07984369788125961,
        "162": 0.09070287861226066,
        "163": 0.07845986897773397,
        "164": 0.008240700457644919,
        "165": 0.051015684446080733,
        "166": 0.04099809055508232,
        "167": 0.017615221709632152,
        "168": 0.035307274745430696,
        "169": -0.02225405972180045,
        "170": -0.12424638996293352,
        "171": -0.24359484254710337,
        "172": -0.13121115775084932,
        "173": -0.03417119779299933,
        "174": 0.0012110501922705087,
        "175": -0.08573983705431935,
        "176": -0.0678713685984488,
        "177": -0.03586614217228632,
        "178": -0.03967631441973073,
        "179": -0.011149330226929738,
        "180": 0.29193465252773826,
        "181": -0.05376868134541294,
        "182": 0.2333607812738446,
        "183": -0.08986159738031954,
        "184": -0.0050484868623936,
        "185": -0.051392842498992175,
        "186": -0.04465576578585395,
        "187": -0.04925832714262768,
        "188": -0.06363565160155085,
        "189": 0.006295731297394153,
        "190": -0.03401076925260461,
        "191": -0.061096451217077526,
        "192": -0.07467020049545833,
        "193": -0.0491429626022826,
        "194": 0.005034988123391943,
        "195": 0.14379385108797513,
        "196": 0.11816325018244998,
        "197": -0.003346376589526707,
        "198": 0.05517406655687364,
        "199": 0.009444302098853805,
        "200": 0.2283248190661537,
        "201": 0.04568042193882864,
        "202": 0.037335120311862965,
        "203": 0.02651778533925067,
        "204": 0.0034813083200071963,
        "205": 0.11647449533898308,
        "206": 0.033749587653734536,
        "207": 0.022866087794612,
        "208": 0.04146009345890796,
        "209": 0.0045773900353763474,
        "210": -0.3187709179328715,
        "211": -0.5618417604076816,
        "212": -0.010376123881517752,
        "213": -0.027118097963872614,
        "214": -0.01035613210446306,
        "215": -0.1486544279946029,
        "216": -0.09269197166661668,
        "217": -0.12350662469478565,
        "218": -0.0833770085195117,
        "219": -0.009625696952316961,
        "220": 0.14962504736523513,
        "221": 0.03023630517317424,
        "222": 0.02371790054321288,
        "223": 0.03129569359398665,
        "224": 0.010322558361200222,
        "225": 0.03649233040460444,
        "226": 0.05692397578122829,
        "227": 0.0713619799133709,
        "228": 0.04640302317549026,
        "229": 0.0004868448545539306,
        "230": 0.09824675771058167,
        "231": 0.21880665745806935,
        "232": 0.11272148614303598,
        "233": 0.17715213488725648,
        "234": -0.018163392835618748,
        "235": -0.022445466288980056,
        "236": -0.30754678426032667,
        "237": -0.2431620161100447,
        "238": -0.1940473476210125,
        "239": -0.007256919140204912,
        "240": 0.20611211086904005,
        "241": 3.9247361242966714,
        "242": 3.003301565015507,
        "243": 3.731940203380429,
        "244": -0.005052606858577409,
        "245": 0.08530523537664562,
        "246": 0.06972898711661535,
        "247": 0.07073133969789891,
        "248": 0.06268425149703394,
        "249": 0.002982544024642762,
        "250": -0.18846763398699906,
        "251": -0.03262570079929607,
        "252": -0.21807217585636676,
        "253": -0.029146694415827252,
        "254": -0.01582639885479321,
        "255": -0.05320654490090519,
        "256": -0.12489137867913577,
        "257": -0.01893272685235232,
        "258": -0.0691021642657683,
        "259": 0.011748404835559782,
        "260": -0.04944120077754186,
        "261": -0.1906522722579438,
        "262": -0.11499541903172802,
        "263": -0.16677216482366355,
        "264": 0.0008593414690588596,
        "265": -0.14195562085980332,
        "266": 0.0043359867558963264,
        "267": -0.05191062562296448,
        "268": -0.03169810450571726,
        "269": 0.00047353515876198893,
        "270": -0.10380272757500773,
        "271": -0.17398231894252433,
        "272": -0.2847711247115185,
        "273": -0.1505969204207999,
        "274": 0.00914457535986363,
        "275": 0.04639850083241604,
        "276": 0.01208487239111989,
        "277": 0.26205443871244266,
        "278": 0.11679796396371497,
        "279": 0.02204778180694482,
        "280": -0.05918238144981143,
        "281": -0.048239230775404825,
        "282": -0.07461680694928009,
        "283": -0.015418743320178705,
        "284": -0.008729864872239946,
        "285": 0.3829820961968321,
        "286": 0.03879894652004617,
        "287": 0.1425266775060826,
        "288": -0.013311191740280063,
        "289": -0.006601223654521277,
        "290": -0.0445730984639552,
        "291": -0.034890567481637894,
        "292": -0.14529494545045318,
        "293": -0.04032035682778925,
        "294": -0.007359201907321297,
        "295": -0.12975065261395183,
        "296": -0.01796096682318264,
        "297": -0.0320701674886932,
        "298": -0.01150371018886664,
        "299": -0.008517840796604344,
        "300": 0.2920545878199639,
        "301": 0.21955588064878825,
        "302": 0.08178304586675134,
        "303": 0.1929246791613709,
        "304": -0.012386064692939226,
        "305": -0.46447598501499165,
        "306": 0.004087091987257528,
        "307": -0.0072301503092379,
        "308": -0.0026544456536885686,
        "309": -0.006180413775891005,
        "310": 0.3058391123759119,
        "311": 0.06290243756305018,
        "312": 0.08634672737893037,
        "313": 0.03811541841866078,
        "314": -0.0006879815371714626,
        "315": 0.04629863596986395,
        "316": 0.17267628855385156,
        "317": 0.07074497502715205,
        "318": 0.1082562396687536,
        "319": 0.005184031591130475,
        "320": 0.21977908070614938,
        "321": 0.053085058789098194,
        "322": 0.0866245304474062,
        "323": 0.011445747568819411,
        "324": -0.0011574020692710037,
        "325": 0.6190813572089592,
        "326": 0.025696288250127198,
        "327": 0.17271624192293136,
        "328": 0.0340279136620182,
        "329": 0.013276970627785416,
        "330": 0.1728992046687839,
        "331": 0.0012970963535029775,
        "332": 0.006085894367733856,
        "333": 0.030127342002216333,
        "334": 0.03158243382864879,
        "335": -0.0700417564410771,
        "336": -0.04020808941220209,
        "337": -0.10687373267416592,
        "338": -0.037123105950106094,
        "339": 0.006332820039954897,
        "340": 0.030283148530015763,
        "341": 0.13216523499941174,
        "342": 0.15598549404837114,
        "343": 0.09367926971891424,
        "344": -0.0005565130312056878,
        "345": -0.11802989061703154,
        "346": -0.08260527413121495,
        "347": -0.005242904574757292,
        "348": -0.11093114514306188,
        "349": -0.00953752619050024,
        "350": -3.110323199375432,
        "351": -0.7575299505604833,
        "352": -2.1679829709788465,
        "353": -0.6240409026895156,
        "354": 0.012526209642750662,
        "355": 0.10498425556765074,
        "356": 0.03995240339703656,
        "357": 0.054348420851698935,
        "358": 0.008406903607819573,
        "359": 0.010210507603691467,
        "360": 0.07908687056071162,
        "361": 0.013366333272421444,
        "362": 0.14358159126813422,
        "363": 0.012206967260519931,
        "364": -0.013649582183369126,
        "365": -0.06190877340804209,
        "366": -0.5004538913769508,
        "367": -0.18175397581454544,
        "368": -0.352974145762558,
        "369": 0.007856070218648677,
        "370": 0.08621059688602319,
        "371": 0.42111679332197366,
        "372": 0.0054324945383108034,
        "373": 0.3263061300013492,
        "374": 0.001724101441695283,
        "375": 0.03755417283650332,
        "376": 0.2066814168559542,
        "377": 0.23864864273222602,
        "378": 0.11351823110261937,
        "379": -0.01281837609292838,
        "380": 0.03477782970549715,
        "381": 0.0260417797394284,
        "382": 0.2524298666785793,
        "383": 0.01644465362228692,
        "384": -0.012021403210393536,
        "385": 0.026305093804284398,
        "386": 1.1303994077755695,
        "387": 1.0897180271045217,
        "388": 0.4947838551488159,
        "389": 0.0041924018841818554,
        "390": 0.13616992801736538,
        "391": 0.04002680975054907,
        "392": 0.01605713234959755,
        "393": 0.02842073440600979,
        "394": -0.003696547163499069,
        "395": -0.21437155759950666,
        "396": -0.03408243243756278,
        "397": -0.07037490935117537,
        "398": -0.020392487787793102,
        "399": -0.007482654147405181,
        "400": -0.09897223818413883,
        "401": -0.019138931659052196,
        "402": -0.02961612680346562,
        "403": -0.005393456587356426,
        "404": -0.0009421829444917974,
        "405": 0.2402293418806936,
        "406": 0.56537357549938,
        "407": 0.2076017880601969,
        "408": -0.12627292243728008,
        "409": 0.008277631843224782,
        "410": -1.4933191906173489,
        "411": -0.5935468408945718,
        "412": 0.10447942457536516,
        "413": -1.0399512595613318,
        "414": -0.004017365361331994,
        "415": 0.11982985831856596,
        "416": 0.022198955752021878,
        "417": 0.0720080380365689,
        "418": 0.015075246572299278,
        "419": -0.007888775196966048,
        "420": -0.1048147065567779,
        "421": -0.012662484915131002,
        "422": -0.056409956966738534,
        "423": -0.008879200467106715,
        "424": 0.014001491796897417,
        "425": 0.05477480378562801,
        "426": 0.16859643897368748,
        "427": 0.010819230627206489,
        "428": 0.15094744841882807,
        "429": 0.0009063362493371283,
        "430": 0.0887039971384878,
        "431": 0.3481690552491926,
        "432": 0.11209488586225265,
        "433": 0.2290982195079948,
        "434": 0.012238700065113045,
        "435": -0.11422334178777652,
        "436": -0.08007119057431397,
        "437": -0.016305995358304525,
        "438": -0.020230200857065134,
        "439": -0.0022954900435123364,
        "440": 0.04626294029052482,
        "441": 0.02774533874647579,
        "442": 0.0802914863874942,
        "443": 0.00846991282214714,
        "444": -0.0032832528841693917,
        "445": -0.060811524148812704,
        "446": -0.0727392732524751,
        "447": -0.01701072732992016,
        "448": -0.05058922395708227,
        "449": -0.014608886128728184,
        "450": -0.10896483147810179,
        "451": -0.02519618298588513,
        "452": -0.040630271802202446,
        "453": -0.029469882583815447,
        "454": -0.00004473662890872808,
        "455": 0.15957083293476512,
        "456": 0.06365741974058667,
        "457": -0.0013155141714320292,
        "458": 0.05152617728469146,
        "459": 0.004377782458702855,
        "460": -0.356346872549813,
        "461": -0.012265267320108157,
        "462": -0.00730327789872718,
        "463": 0.015481111656733606,
        "464": -0.009311064585512745,
        "465": -0.19253153442131915,
        "466": -0.055087074287489476,
        "467": -0.032668165476967694,
        "468": -0.0013565801048526904,
        "469": 0.00609534388594395,
        "470": 0.05490537018482394,
        "471": 0.11475164895724892,
        "472": 0.01970845919915617,
        "473": 0.07801202725813963,
        "474": -0.009318397895265167,
        "475": -0.015416497243231592,
        "476": -1.1857890442717485,
        "477": -0.8403939968905353,
        "478": -1.2555013923680427,
        "479": 0.008133076134001962,
        "480": -0.04860701419260731,
        "481": -0.17404138932284954,
        "482": -0.14692941653785258,
        "483": -0.18034627925334965,
        "484": -0.009738711226269327,
        "485": 0.1866817900310898,
        "486": 0.03535872326723304,
        "487": 0.6551236131262483,
        "488": 0.30207062073882995,
        "489": 0.011137223767522067,
        "490": -0.45574456300878297,
        "491": 0.0018947250006988172,
        "492": -0.018203066813306266,
        "493": -0.0005826697033328892,
        "494": -0.007695707827070639,
        "495": 0.423080882923907,
        "496": 0.0634928842749161,
        "497": 0.152032538380684,
        "498": 0.017318104895392424,
        "499": -0.005223777401641061
      }
    },
    "b1": {
      "n": 100,
      "d": 1,
      "w": {
        "0": 0.00012912583774613826,
        "1": -0.0019212394182301586,
        "2": -0.0007188087046604027,
        "3": 0.006707870956730509,
        "4": -0.0002531984035842735,
        "5": 0.0001751411521891123,
        "6": -0.0008016229313422303,
        "7": -0.00042522018298159496,
        "8": 0.0007394565419388584,
        "9": -0.000694670747282871,
        "10": 0.000873035365635839,
        "11": -0.0014972024185398592,
        "12": -0.00010409664046344488,
        "13": -0.0008104270829329834,
        "14": -0.00008719387259296128,
        "15": 0.003305810373556893,
        "16": 0.0004926407450805068,
        "17": 0.00020029682679294865,
        "18": -0.000236664865295491,
        "19": 0.00025558125342270893,
        "20": 0.00006737832619278806,
        "21": -0.00028942326423057587,
        "22": 0.00017480099460239547,
        "23": 0.0011224650069173359,
        "24": 0.000020406260527984227,
        "25": 0.003201985910665067,
        "26": -0.0020172487925508554,
        "27": -0.00048416891413079194,
        "28": 0.005296300961379955,
        "29": -0.0018017871880314955,
        "30": 0.00029981587294169917,
        "31": -0.0008637645412075893,
        "32": 0.001211822250679509,
        "33": -0.00011216394399164644,
        "34": 0.0005400676248443746,
        "35": -0.00008977094943606142,
        "36": 0.0004932782412024576,
        "37": 0.0014957852042636998,
        "38": -0.0005880558978363014,
        "39": 0.0015211806029787449,
        "40": 0.00006810495243013644,
        "41": 0.00008348451410579341,
        "42": 0.003708200091299273,
        "43": -0.0003296367842429044,
        "44": 0.0003115940849239658,
        "45": -0.00033555872332362974,
        "46": 0.0009208780140144454,
        "47": -0.001017910293125942,
        "48": 0.015738528943128074,
        "49": 0.0002332853566348501,
        "50": -0.00021606631016799193,
        "51": -0.0013049616761822383,
        "52": -0.00027111449839786744,
        "53": -0.00019079975157307947,
        "54": -0.001059933459924239,
        "55": 0.000594849811772113,
        "56": -0.00040642020482308737,
        "57": 0.0005199786856306195,
        "58": -0.0014713588573042264,
        "59": -0.00019479499792464914,
        "60": 0.0010300330159260759,
        "61": -0.0015775800899917986,
        "62": 0.0004546974646191299,
        "63": 0.001022061667926501,
        "64": 0.0002914910187321893,
        "65": 0.0006002011845601179,
        "66": 0.00023349666075334646,
        "67": -0.0007462581244089153,
        "68": 0.0000576642484505245,
        "69": -0.00032321200675102066,
        "70": -0.00626669217971304,
        "71": 0.00018516656339470826,
        "72": 0.0005593862280135549,
        "73": -0.0018031970558994048,
        "74": 0.0000266087146684055,
        "75": 0.0015405187319173141,
        "76": 0.0015192548696667306,
        "77": 0.006599986371716512,
        "78": 0.0002102482795165521,
        "79": -0.00034523940091919883,
        "80": -0.0005496713171743702,
        "81": -0.008778043310701967,
        "82": -0.006566148673757115,
        "83": 0.0002514015545439073,
        "84": -0.00039329326337955375,
        "85": 0.00043137406825457,
        "86": 0.0009232418939946999,
        "87": 0.00024303585815822485,
        "88": 0.0005944649688009987,
        "89": 0.000016192238756180266,
        "90": -0.000013689674826935306,
        "91": -0.0005537317318905058,
        "92": -0.0017103712213665395,
        "93": -0.00007118568221342284,
        "94": 0.0001450189989149345,
        "95": -0.014447788423273138,
        "96": -0.0014709620429841526,
        "97": 0.005105698415617744,
        "98": 0.00005974800087991944,
        "99": 0.0014961688452411323
      }
    },
    "W2": {
      "n": 2,
      "d": 100,
      "w": {
        "0": -0.007337360850870706,
        "1": 0.11425900754649967,
        "2": 0.06979623019712028,
        "3": -0.18692932682436758,
        "4": -0.009359466415325143,
        "5": -0.0038253866615384218,
        "6": 0.05114399614135211,
        "7": 0.05178789239954669,
        "8": -0.04860284660983214,
        "9": -0.012451892604500862,
        "10": -0.033061387395179734,
        "11": 0.008539029409308313,
        "12": 0.059109485093691405,
        "13": -0.6419061834543922,
        "14": 0.0035043720669571976,
        "15": -0.06601948970307181,
        "16": 0.013953932432496746,
        "17": -0.003615871552174472,
        "18": 0.048100193699228966,
        "19": 0.004823787453630663,
        "20": 0.008701414141562346,
        "21": -0.007370476563729652,
        "22": 0.20345032328548468,
        "23": -0.09835863319290311,
        "24": 0.048075609481798336,
        "25": -0.05711428456284787,
        "26": 0.08656570285609905,
        "27": 0.02044239438765124,
        "28": -0.13974530570017046,
        "29": 0.08021426345558345,
        "30": -0.01730502724561698,
        "31": 0.01240774740326622,
        "32": -0.08303724071286066,
        "33": -0.0153852721704432,
        "34": 0.40276580155330916,
        "35": 0.04371678048086275,
        "36": -0.010149865652389092,
        "37": 0.0035418467178620944,
        "38": 0.04144382838145681,
        "39": -0.015223149524058528,
        "40": 0.010511906524823124,
        "41": -0.0004753723594449465,
        "42": 0.1830598945019371,
        "43": -0.01495738533993747,
        "44": -0.010366623395105305,
        "45": -0.05309190913741243,
        "46": -0.06703215811922625,
        "47": 0.10077420712713164,
        "48": 2.6492575191742045,
        "49": -0.02086792089102015,
        "50": 0.001164794983118313,
        "51": 0.08947552839967984,
        "52": 0.12599526399911112,
        "53": 0.011763956760486943,
        "54": 0.1406486463334065,
        "55": -0.12060460930709624,
        "56": 0.008522336719614134,
        "57": 0.00938669673207998,
        "58": 0.04391267531180764,
        "59": 0.005990091698852472,
        "60": -0.10726189889531143,
        "61": -0.02134025387902438,
        "62": -0.020273404401628146,
        "63": -0.07925861781415214,
        "64": -0.00039678523395406676,
        "65": 0.05929350618506403,
        "66": 0.020274744894489702,
        "67": 0.09381625946094507,
        "68": -0.05158512238022599,
        "69": 0.004461921501666272,
        "70": -0.423006568831839,
        "71": -0.023471616176814303,
        "72": -0.0005147435565342303,
        "73": -0.04165970287734,
        "74": -0.1088108408598163,
        "75": -0.0623071098308952,
        "76": -0.04850460426255826,
        "77": 0.006861729334494609,
        "78": -0.02464451393324521,
        "79": -0.01385097172783627,
        "80": 0.037236639044683564,
        "81": -0.3049513499293865,
        "82": -0.7093955760237523,
        "83": -0.02305929972432703,
        "84": 0.013924794239508709,
        "85": -0.05464199818902449,
        "86": -0.04188953602334758,
        "87": 0.0334568580633741,
        "88": -0.03985598459844702,
        "89": 0.07637471820880923,
        "90": 0.00803113124828118,
        "91": -0.004215826464087064,
        "92": -0.05855733795469279,
        "93": 0.07323442612307005,
        "94": -0.09929747157875662,
        "95": 0.09264997449077453,
        "96": 0.11612120546140431,
        "97": 1.309177380935795,
        "98": -0.019186107575119283,
        "99": -0.1623805781119979,
        "100": 0.08157617986890721,
        "101": 0.10465280499908557,
        "102": 0.04262238325838323,
        "103": -0.17851241245519506,
        "104": 0.03699265303621048,
        "105": -0.05414500372250966,
        "106": 0.025156458990392823,
        "107": -0.00901336341432672,
        "108": 0.017697494199825074,
        "109": -0.10209876751750692,
        "110": -0.06195981148753318,
        "111": -0.03172634219798666,
        "112": 0.029338230446286744,
        "113": -1.3309562137205564,
        "114": -0.026172620752325126,
        "115": -0.018328480314853603,
        "116": -0.06551030450988726,
        "117": 0.09258939789962409,
        "118": 0.10513403243020462,
        "119": 0.0796115241424258,
        "120": -0.08544106565102538,
        "121": -0.06932421646076788,
        "122": 0.44301633062270984,
        "123": -0.02470897621572142,
        "124": -0.010071616638665385,
        "125": -0.0734418544630406,
        "126": 0.04908487638357796,
        "127": -0.06597104591576086,
        "128": -0.06631703349005608,
        "129": 0.04904850486919374,
        "130": 0.05088761798735425,
        "131": -0.027990205725582577,
        "132": 0.02341273073267921,
        "133": 0.06775027825402598,
        "134": -0.004968153444268367,
        "135": -0.060035175226884716,
        "136": -0.019588555572004025,
        "137": -0.10488538670231118,
        "138": -0.03802419772003902,
        "139": 0.05606817015047085,
        "140": 0.10129938460883516,
        "141": 0.08605039422093687,
        "142": 1.3272041709452242,
        "143": -0.0827813438056554,
        "144": 0.08946665145848814,
        "145": -0.02198118637068584,
        "146": -0.030325765381113735,
        "147": 0.05067387050294936,
        "148": -0.03170990804284074,
        "149": 0.015922813688320613,
        "150": -0.04791477882454907,
        "151": 0.018702655930761924,
        "152": 0.09485751166729108,
        "153": -0.07698140309696831,
        "154": 0.012439748729033745,
        "155": -0.030182716284640053,
        "156": -0.07415365507227425,
        "157": 0.07683093182812227,
        "158": 0.013812998914647035,
        "159": -0.0831825429217156,
        "160": -0.15524182296801337,
        "161": -0.07822131974572476,
        "162": 0.06949558444706157,
        "163": 0.005716311412665196,
        "164": 0.07815334569455633,
        "165": 0.1161920055064826,
        "166": 0.08500585455826182,
        "167": -0.025323981988165472,
        "168": 0.08703293907959557,
        "169": -0.031238622877810034,
        "170": -0.7295595442511404,
        "171": 0.06758674283772398,
        "172": 0.0749375759942293,
        "173": -0.08065055086556998,
        "174": -0.09924741568899721,
        "175": -0.02402546957801223,
        "176": 0.02607407656766234,
        "177": 0.05710090857897073,
        "178": 0.045037128897197645,
        "179": -0.07714305350456953,
        "180": -0.05974442278758143,
        "181": -0.12882229366869377,
        "182": -0.036186523434764695,
        "183": 0.06843623811311411,
        "184": -0.07501639849236169,
        "185": 0.007487355075893856,
        "186": 0.0027315690398434385,
        "187": -0.05364039607528874,
        "188": 0.0306492511748267,
        "189": 0.04417971170417814,
        "190": -0.07210349329658244,
        "191": 0.06610831709914337,
        "192": -0.1253648111000263,
        "193": -0.021566502021976824,
        "194": -0.0354292469527461,
        "195": 0.14314829393177364,
        "196": 0.05137231775636575,
        "197": 0.26303469947190883,
        "198": -0.10949402208526372,
        "199": -0.030705315064564493
      }
    },
    "b2": {
      "n": 2,
      "d": 1,
      "w": {
        "0": -0.004818224511193274,
        "1": 0.0794790949582941
      }
    }
  }
};